language: node_js

node_js:
  - node

# Build only commits on master and release tags preventing double builds for PRs
# See https://docs.travis-ci.com/user/pull-requests/#double-builds-on-pull-requests
branches:
  only:
    - master
    - /v[0-9]+\.[0-9]+\.[0-9]+(-.*)?$/

jobs:
  include:
    - stage: Bla
      dist: trusty
      addons:
        apt:
          packages:
            - libgconf-2-4
      cache:
        npm: true
        directories:
          - '$HOME/.sonar/cache'
          - '~/.cache'
      script:
        - echo "Script !"
      after_script:
        - echo "After Script !"
      deploy:
        - provider: script
#          script: echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc && npm publish
#          script: NPM_API_KEY=${NPM_TOKEN} npm publish
          script: echo "Deploy 1"
        - provider: npm
          script: cd ree
          api_key: ${NPM_TOKEN}
